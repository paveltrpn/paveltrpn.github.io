<!DOCTYPE HTML>
<html>
    <head>
        <title>Console tips</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../../css/style.css">
        <link rel="stylesheet" href="../../css/prism.css"/> <!-- Тема подсветки кода для Prism -->
        <script src="../../js/top_bottom.js" defer></script>

        <!-- Подключение локального MathJax -->
        <script type="text/javascript" id="MathJax-script" async
        src="../../js/MathJax3.0.0/es5/tex-svg.js">
            MathJax.Hub.Config({
                extensions: ["tex2jax.js","TeX/noErrors.js"],
	            jax: ["input/TeX","output/HTML-CSS"],
	            tex2jax: {inlineMath: [['$','$'],["\\(","\\)"]]},
	            "HTML-CSS": {availableFonts:["TeX"]}
            });
        </script>
        <!-- ============================== -->

    </head>
    <body>
        <!-- Подключение скрипта Prism -->
        <script src="../../js/prism.js"></script>

        <div class="container">

        <div id="top_article" class="menu"></div> <!-- Сюда вставляется код заголовка -->

        <div class="A4">

            <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
            <p class="plain">
                <b>Установка ядра 5.8 под Linux Mint 20</b>
            </p>

            <p class="plain">
                Ядро по умолчанию в Mint 20 - 5.4. Ядро 5.8 понадобилось, чтобы в VMWare Player 16 заработал OpenGL 4.1.   
                Установка ядра 5.8 без сборки из *.deb пакетов очень проста. Скачиваем:
            </p>

            <p class="plain" style="text-align: left;">
                &emsp;&emsp; - https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.8/amd64/linux-headers-5.8.0-050800-generic_5.8.0-050800.202008022230_amd64.deb<br>
                &emsp;&emsp; - https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.8/amd64/linux-image-unsigned-5.8.0-050800-generic_5.8.0-050800.202008022230_amd64.deb<br>
                &emsp;&emsp; - https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.8/amd64/linux-modules-5.8.0-050800-generic_5.8.0-050800.202008022230_amd64.deb  
            </p>

            <p class="plain">
                Нужно убедиться что в папке нет других *.deb пакетов. Далее просто запускаем:
            </p>

            <pre class="line-numbers">
    <code class="language-bash">sudo dpkg -i *.deb</code></pre>

            <p class="plain">
                После перезагрузки ваполним:
            </p>
                
            <pre class="line-numbers">
    <code class="language-bash">uname -a</code></pre>

            </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

            <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
            <p class="plain">
                <b>Cборка Mesa3d 20.2</b>
            </p>

            <p class="plain">
                Скачиваем и паспаковываем дистрибутив с сайта Mesa 3d:
            </p>

            <p class="plain" style="text-align: left;">
                &emsp;&emsp; - https://docs.mesa3d.org/download.html
            </p>

            <p class="plain">
                Вообще, сборка описана там же на сайте. Собираем по инструкции https://docs.mesa3d.org/install.html. Если в кратце, то:
            </p>

            <pre class="line-numbers">
    <code class="language-bash">meson builddir/
    ninja -C builddir/
    sudo ninja -C builddir/ install</code></pre>
                
            <p class="plain">
                Там будет много зависимостей от X11, устанавливаем все, конфигурирум и собираем через Meson и Ninja. После сборки Ninja закинет  
                собраные бинарники в - `/usr/local/lib/x86_64-linux-gnu`, перемещаем всё это добро в `/usr/lib/x86_64-linux-gnu`.
            </p>

            </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

            <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
            <p class="plain">
                <b>Изменение удаленного URL Git.</b>
            </p>

            <pre class="line-numbers">
    <code class="language-bash">git remote set-url {remote-name} {remote-url}</code></pre>
                
            </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

            <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
            <p class="plain">
                <b>Установка python 3.9</b> в Linux Mint 20.0 (после установки запускаться будет как :~$python3.9).
            </p>

            <pre class="line-numbers">
    <code class="language-bash">sudo apt-get update
    sudo apt install software-properties-common
    sudo add-apt-repository ppa:deadsnakes/ppa
    sudo apt install python3.9
    sudo apt install python3.9-dev</code></pre>

            <p class="plain">
                По умолчанию в Linux Mint 20.2 не установлен pip, поэтому нужно сделать:
            </p>

            <pre class="line-numbers">
    <code class="language-bash">sudo apt install python3-pip</code></pre>

            <p class="plain">
                Зависимости для конкретной версии python через pip устанавливаются так:
            </p>

            <pre class="line-numbers">
    <code class="language-bash">python3.9 -m pip install numpy</code></pre>
                
            </div> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->

            <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->

            <p class="plain">
                <b>Исправляем работу (или неработу) PyImgui в Linux Mint 20.2.</b>
                <br><br>
                Имеется стек - VirtualBox 6.1 -> Linux Mint 20.2 -> Python 3.9 + PyOpenGL + GLFW, на котором с аппартным ускорением работает OpenGL не выше 2.1.
                При этом хочется использовать PyImgui (pip-ом устанавливается в версии 1.65) но завести всё это не получается т.к. PyOpenGL выпадает с
                ошибками GL_INVALID_OPERATION при вызовах glUniform*, glAttribLocation* и т.д. видимо из-за попытки PyImgui использовать программируемый пайплайн рендера 
                OpenGL 3.3+. 
                <br><br>
                В файле ~/.local/lib/python3.9/site-packages/imgui/integrations/glfw.py имеется следующее:
            </p>

            <pre class="line-numbers">
    <code class="language-python">...
    from .opengl import ProgrammablePipelineRenderer

    class GlfwRenderer(ProgrammablePipelineRenderer):
        def __init__(self, window, attach_callbacks=True):
    ...</code></pre>

            <p class="plain">
                Хотя класс GlfwRenderer унаследован от ProgrammablePipelineRenderer, в файле ~/.local/lib/python3.9/site-packages/imgui/integrations/opengl.py 
                так же определён класс FixedPipelineRenderer и если внести небольшие изменения, то всё заведётся на старом профайле OpenGL 2.1:
            </p>
    
            <pre class="line-numbers">
    <code class="language-python">...
    from .opengl import ProgrammablePipelineRenderer
    from .opengl import FixedPipelineRenderer

    class GlfwRenderer(FixedPipelineRenderer):
        def __init__(self, window, attach_callbacks=True):
    ...</code></pre>

        </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

        <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
        <p class="plain">
            <b>Добавляем в удалённый репозиторий из коммандной строки</b>
        </p>

        <pre class="line-numbers">
    <code class="language-bash">git init
    git add {файлы и папки которые добавляем}
    git commit -m "first commit"
    git branch -M main
    git remote add origin https://github.com/paveltrpn/{имя репозитория}.git
    git push -u origin main</code></pre>
                
        </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

        <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
            <p class="plain">
                <b>Модуль для автокомплита из bpy для Blender.</b>
            </p>

            <pre class="line-numbers">
    <code class="language-bash">python3.9 -m pip install fake-bpy-module-2.93</code></pre>
                
            </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

            <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->

            <p class="section">
                НАСТРОЙКА GOLANG В LINUX
            </p>

            <p class="small">
                (http://blog.sedicomm.com/2018/01/21/kak-ustanovit-golang-yazyk-programmirovaniya-go-v-linux/)
            </p>

            <p class="subsection">
                Загрузка дистрибутива Golang
            </p>

            <p class="plain">
                Скачиваем дистрибутив, например отсюда — <i>https://golang.org/dl/</i>, или так
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ wget -c https://storage.googleapis.com/golang/go{version}.linux-amd64.tar.gz</code></pre>
 
            <p class="plain">
                Распаковываем в /usr/local, формируя дерево каталога Golang в /usr/local/go:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ tar -C /usr/local -xzf go$VERSION.$OS-$ARCH.tar.gz</code></pre>
            
            <p class="subsection">
                Настройка среды GoLang в Linux
            </p>

            <p class="plain">
                Сначала настройте рабочее пространство Go, создав каталог ~/go_projects, который является корнем вашего 
                рабочего пространства. Рабочее пространство состоит из трех каталогов, а именно:
            </p>

            <p class="plain">
                <i>
                &emsp;&emsp; bin, который будет содержать исполняемые двоичные файлы Go;<br> 
                &emsp;&emsp; src, который сохранит ваши исходные файлы;<br> 
                &emsp;&emsp; pkg, который будет хранить объекты пакета.<br>
                </i> 
            </pre>

            <p class="plain">
                Теперь создайте указанное выше дерево каталогов следующим образом:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ mkdir -p ~/go_projects/{bin,src,pkg}
    $ cd ~/go_projects
    $ ls</code></pre>

            <p class="plain">
                Вот и пришло время запустить Go, как и остальные Linux-программы, его каталог установки должен быть 
                сохранен как одно из значений переменной среды PATH.
            </p>

            <p class="plain">
                Теперь добавьте /usr/local/go/bin в переменную среды PATH, вставив строку приведенную ниже в 
                файл /etc/profile для общесистемной установки или $HOME/.profile или $HOME./Bash_profile для 
                пользовательской установки, используя ваш любимый редактор, откройте соответствующий файл профиля 
                пользователя в соответствии с вашим дистрибутивом и добавьте строку приведенную ниже, сохраните файл и выйдите из него:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">export PATH=$PATH:/usr/local/go/bin</code></pre>

            <p class="plain">
                Затем установите значения переменных среды GOPATH и GOBIN в файле профиля пользователя 
                (~/.profile или ~/bash_profile), чтобы указать на ваш каталог рабочей области.
            </p>

            <pre class="line-numbers">
    <code class="language-shell">export GOPATH="$HOME/go_projects"
    export GOBIN="$GOPATH/bin"</code></pre>

            <p class="plain">
                <b>Примечание.</b> Если вы установили GoLang в пользовательский каталог, отличный от значения по умолчанию (/usr/local/), 
                вы должны указать этот каталог как значение переменной GOROOT. Например, если вы установили GoLang в домашний каталог, 
                добавьте строки приведенные ниже в файл $HOME/.profile или $HOME/.bash_profile.
            </p>

            <pre class="line-numbers">
    <code class="language-shell">export GOROOT=$HOME/go
    export PATH=$PATH:$GOROOT/bin</code></pre>

            <p class="plain">
                Последним шагом в этом разделе является внесение изменений в профиль пользователя в текущем сеансе bash следующим образом:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ source ~/.bash_profile
    или
    $ source ~/.profile</code></pre>

            <p class="subsection">
                Выключаем go-lint в vs code
            </p>

            <p class="plain">
                После установки расширений golang в vs code среди прочего начинает работать go-lint, ругаясь на все 
                стиливые недочёты кода. Исправляется редактирование settings.json. Выключаем так: 
            </p>

            <p class="plain">
            <i>
            &emsp;&emsp;File &rArr; Preferences &rArr; Settings;<br>
            &emsp;&emsp;Выбираем где угодно - Edit in settings.json;<br>
            &emsp;&emsp;Добавляем - "go.lintFlags": ["--disable=all"]<br>
            </i>
            </p>

        </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->
        
        <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
            <p class="plain">
                <b>whereis</b> - locate the binary, source, and manual page files for a command
            </p>

        <pre class="line-numbers">
    <code class="language-bash">whereis {command}</code></pre>
                
        </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

        <div class="record"> <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
            
            <p class="plain">
                <b>which</b> - locate a command
            </p>

        <pre class="line-numbers">
    <code class="language-bash">which {command}</code></pre>
                
        </div> <!-- ============= КОНЕЦ ЗАПИСИ ============== -->
        
        <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
        <div class="record"> 
            
            <p class="plain">
                <b>Create your</b> first golang project
            </p>

        <pre class="line-numbers">
    <code class="language-bash">mkdir hello-world
    cd hello-world
    go mod init github.com/marcofranssen/hello-world</code></pre>
                
        </div> 
        <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

        <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
        <div class="record"> 
            
            <p class="plain">
                <b>Выключаем golang language server (gopls)</b>, в settings.json нужно добавить:
            </p>

        <pre class="line-numbers">
    <code class="language-json">"go.languageServerExperimentalFeatures": {
    "diagnostics": false
    },</code></pre>
                
        </div> 
        <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

        <!-- ============= НАЧАЛО ЗАПИСИ ============= -->
        <div class="record"> 
            
            <p class="plain">
                <b>Отключаем старые модули golang</b>, чтобы локальный импорт работал:
            </p>

        <pre class="line-numbers">
    <code class="language-bash">go env -w GO111MODULE=off
    paveltrpn@paveltrpn:~/code/go_hello$ set GOPATH=~\code</code></pre>
                
        </div> 
        <!-- ============= КОНЕЦ ЗАПИСИ ============== -->

        </div>
        
        <div class="menu" id="bottom"></div>
        
        </div>
        
    </body>
</html>